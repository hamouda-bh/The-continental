{% extends 'layout.twig' %}

  {% block stylesheets %}
      <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" />
      <link rel="stylesheet" href="/stylesheets/main.css" />
      <noscript><link rel="stylesheet" href="/stylesheets/noscript.css" /></noscript>
  {% endblock %}

{% block body %}

    <div id="wrapper">

    <!-- Header -->
    <header id="header">
        <div class="inner">

            <!-- Logo -->
            <a href="fichiersHtml/index.html" class="logo">
                <span class="fa fa-plane"></span> <span class="title">The continental</span>
            </a>

            <!-- Nav -->
            <nav>
                <ul>
                    <li><a href="#menu">Menu</a></li>
                </ul>
            </nav>

        </div>
    </header>

    <!-- Menu -->
    <nav id="menu">
        <h2>Menu</h2>
        <ul>
            <li><a href="fichiersHtml/index.html">Home</a></li>

            <li><a href="fichiersHtml/packages.html" class="active">Packages</a></li>

            <li><a href="fichiersHtml/blog.html">Blog</a></li>

            <li>
                <a href="#" class="dropdown-toggle">About</a>

                <ul>
                    <li><a href="fichiersHtml/about.html">About Us</a></li>
                    <li><a href="fichiersHtml/testimonials.html">Testimonials</a></li>
                    <li><a href="fichiersHtml/terms.html">Terms</a></li>
                </ul>
            </li>
            <li><a href="fichiersHtml/contact.html">Contact Us</a></li>
        </ul>
    </nav>
    <div id="main">
    <div class="inner">
    <h3>Detail du personnel</h3>

    <div class="container-fluid">
        <div class="col-lg-9">
            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
                </ol>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img class="d-block w-100" src="/images/product-1-720x480.jpg" alt="First slide">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="/images/product-2-720x480.jpg" alt="Second slide">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="/images/product-3-720x480.jpg" alt="Third slide">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="/images/product-4-720x480.jpg" alt="Fourth slide">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="/images/product-5-720x480.jpg" alt="Fifth slide">
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
        <br><br>

    <div class="table-responsive">
        <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table">
             <thead  id="head">
            <tr>
                <th>Fist Name</th>
                <th>Last Name</th>
                <th>Age</th>
                <th>Fonction</th>
                <th>Salary</th>
                <th>Contract start date</th>
                <th>Contract end date</th>
            </tr>
            </thead>
            {% if personnels|length == 0 %}
            Il n'y a aucun personnel Ã  afficher.
            {% else %}

            <tbody>

            <tr>
                                    <td> <input type="text" id="nom" value="{{ personnels.nom }}"/></td>
                                    <td> <input type="text" id="prenom" value="{{ personnels.prenom }}"/></td>
                                    <td><input type="text" id="age" value="{{ personnels.age }}"/></td>
                                    <td><input type="text" id="fonction" value="{{ personnels.fonction }}"/></td>
                                    <td><input type="text" id="salaire" value="{{ personnels.salaire }}"/></td>
                <td><p id=dateDebutContrat">{{ personnels.date_debut_contrat}}</p></td>
                <td><p id="dateFinContrat">{{ personnels.date_fin_contrat }}</p></td>
                                     <td> <button class="btn btn-outline-danger" onclick="deleteOne({{personnels.id}})">Remove</button></td>
                                    <td> <button class="btn btn-outline-primary" onclick="updateOne({{personnels.id}})">Save</button></td>
            </tr>

            </tbody>
            {% endif %}
        </table>
    </div>

        <br>


    </div>
    </div>
    </div>
    </div>



 {% endblock %}
  {% block javascriptsAtTheEnd %}
    <script src="/javascripts/jquery.min.js"></script>
    <script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/javascripts/jquery.scrolly.min.js"></script>
    <script src="/javascripts/jquery.scrollex.min.js"></script>
    <script src="/javascripts/main.js"></script>
    <script type="text/javascript" src='/javascripts/jquery.js'></script>
    <script type="text/javascript" src="/javascripts/jquery.dataTables.min.js"></script>

<script>

function deleteOne (id){
$.ajax({
			type: 'delete',
			url: "http://localhost:3000/personnelle/deleteOne/"+id,
			dataType: 'json',
			async: false,
			success: (result) => {
			}
})
    location.href="http://localhost:3000/personnelle/all"

}
  function updateOne(id){
              $.ajax({
                  type: 'put',
                  url: "http://localhost:3000/personnelle/updatePersonnelle/"+id,
                  data:{
                      nom: $('#nom').val(),
                      prenom: $('#prenom').val(),
                     age: $('#age').val(),
                      fonction: $('#fonction').val(),
                      salaire: $('#salaire').val()
                  },
                  dataType: 'json',
                  async: false,
                  success: (result) => {
                      // location.href="http://localhost:3000/personnelle/findOne/"+id
                  }
              })
              location.reload()

          }


</script>{% endblock %}